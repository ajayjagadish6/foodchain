spring:
  datasource:
    # Cloud Run + Cloud SQL MySQL
    # Uses the Cloud Run integrated Cloud SQL Auth Proxy (Unix socket at /cloudsql/<INSTANCE_CONNECTION_NAME>).
    # Provide CLOUD_SQL_CONNECTION_NAME like "my-project:us-central1:my-sql-instance"
    url: ${DB_URL:jdbc:mysql:///${DB_NAME:foodchain-db}?unix_socket=/cloudsql/${CLOUD_SQL_CONNECTION_NAME:CHANGE_ME}&useSSL=false&allowPublicKeyRetrieval=true&serverTimezone=UTC}
    username: ${DB_USER:foodchain}
    password: ${DB_PASSWORD:foodchain}
    hikari:
      maximum-pool-size: ${DB_POOL_MAX:15}
      minimum-idle: ${DB_POOL_MIN_IDLE:2}
      connection-timeout: ${DB_POOL_CONN_TIMEOUT_MS:30000}
      idle-timeout: ${DB_POOL_IDLE_TIMEOUT_MS:600000}
      max-lifetime: ${DB_POOL_MAX_LIFETIME_MS:1800000}

foodchain:
  # Optional: for dev/prod parity you might want to reduce spam on shared prod db
  notifications:
    sms:
      enabled: ${SMS_ENABLED:false}
